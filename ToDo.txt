Next Actions
======================================
Login
 + create some automated test
 System/UI Tests


create a  test for Student/Advisor CRUD: Test full create/edit/delete flows for students/advisors.
create a  test for Event Option Logic: Test “Add Another Option” button and value copying.
create a  test for Navigation Bar: Confirm correct links for logged-in/out/admin users.
create a  test for TDF Import: Test importing TDF files and normalization of values.
create a  test for Error Handling: Test 404, 422, 500 error pages and redirects.

Model/Unit Tests

User Model: Validate email format, admin flag, token generation.
Event Model: Validate required fields, associations, and date logic.
EventOption Model: Validate copying logic, required fields.
Advisor/Student Models: Validate associations, required fields, and uniqueness.
Service Objects: Test any custom logic/services (e.g., TDF import normalization).


 + practice branching


Timeline
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
7/28: Remove Dangerous Task
 + new advisor
 + new student
 + delete student/advisor

09/01: Vehicle / off campus Logs gather
10/01: Special Views
11/01: Student Pictures
12/01: Tranport Drag/drop


Blake Questions
=================




September
  Week 1, 09/03: Activity TBD, Social Get to Know You Activity Planned by Advisors
  Week 2, 09/10: Budgeting, Activities only
**Week 3, 09/17: PSST Inventories, Activities Sign-Ups
  Week 4, 09/24: Budgeting, Activities and Personal Supplies

October
  Week 1, 10/01: Shopping Trip
  Week 2, 10/08: Budget, Activities only
  Week 3, 10/15: PSST Inventories, Activity Sign-Ups
**Week 4, 10/22: Budget, Activities and Personal Supplies
  Week 5, 10/29: Shopping Trip

November
  Week 1, 11/05: Budget Activities only
**Week 2, 11/12: PSST Inventories and Activity Sign-Ups
  Week 3, 11/19: Budget Activities and Personal Supplies ***3 Week Budget***
  Week 4, 11/26: Thanksgiving Travel

December
  Week 1, 12/03: Shopping Trip
  Week 2, 12/10: Budget Activities Only, Christmas Celebration (second hour)
  Week 3, 12/17: Packing and Departure for Winter Break


Next Actions
=================
+production test mode
  - add message to contact xxx if not enabled ✓

+ Audit Logs for dangerous Actions
  + emails sent
  + survey changes
  + any edit/delete Actions
  + email login tokens generated

+ Event Creation Form improvements
  - syling
  - compact Options discription
  + first event time default rest of the date/time
  + No Thanks, off campus check boxes

+ Survey Removal
  -Sudent Event Selection Page create 2 section:
    -Upcoming Event not yet selected
    -Upcomign Events already selected

+ Student Show
  - split Events by upcoming / Past
  - fix avisor name

+ Edit Student Page
 + advisor drop down
 + styling

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Features:
================
 +Add Events needing a respons on
    + Advisor Page index page totall accross all students
    + Events by Student advisor Page

+ Refactos
   - Event Show page N+1 query

+ Event        --> Student Cash View Broken

+ New Event    --> Clone "Event Option" feature

+ Event_signup --> Dollar total when selecting

+ Advisor Money Movement report
   - by Event Cash to Student Life, To Office

+ Style Improvements



Edge Casses
+ Event with paying options that are not Dinner, will not display nicely on Advisor show Page

+Offcampus Log Scrap
  https://docs.google.com/spreadsheets/d/1JGvvQBJPvg0okSZHi19hJsPHC2rw6DpZN9p3zW1eiMs/gviz/tq?tqx=out:csv&sheet=09-08


+ Gather Off Campus Logs

+ Move 'Dangerous' Actions to another section
  - Edit/delete students
  - Edit/Delete Events
  -


+ Locked Event Feature
  - Event can be marked as "Locked"
  - Advisor can't make changes to student
  - Heather still has override power


+ Future / Past Event display

+ Special Views
  - Haircut, list by year 1,2,3
  - no transport
  - just list of those going or no

==================================

+ Bulk student update?
  - pull data from blackbaud API ?

+ Student Pictures

+ Transportation Assignment page

+ Student report page
  - all event student signed up for
  - Total Spent
  - filter only future events?





==============================================================================
                                Done!
==============================================================================
 - modify intercepted to allow magic links
 - modify intercepter to send email to Heather, Nathan

create a  test for Login Flow: Test magic link login (valid/invalid/expired token).
create a  test for Logout Flow: Ensure users are logged out and redirected.
create a  test for Admin Access: Verify admin-only pages/buttons are hidden for non-admins.
create a  test for Event Creation/Edit: Test creating, editing, and deleting events as admin.

+ Event result page
  - Student spit by living area
  - totals for each catgory
+ Avisors student col line up

- Detect incomplete Survey, or missing students
+ Seed TDF for large Event signup

 ~ get summit working
    ~ rename upcoming_events to event_signup _form
    ~ redirect back to orginal page on submit_event_options_student_path

+ Seed database
  + make event date realitve today so don't have to manually update

  7/21: Auth continued                Staff returning

  + Parent Email 
  - hide off campus / no Thanks
  - test trigger working

+ Remove any username signup ✓

+ Parent Email

+ Advisor
  + Show = upcoming events shows all student not just advisor
+ Parent email - 30 min delay to avoid spamming ✓ (2 hour delay)  
  - option to force send?
<% if admin_user? && @student.parent_email.present? %>
    <br>
    <!-- <% # if DelayedParentEmailService.pending_emails_for_student(@student) %> -->
      <span class="text-sm text-orange-600">⏱️ Email scheduled to send in 2 hours</span>
    <% end %>
  <% end %>
</p>

<% if admin_user? && @student.parent_email.present? %>
  <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
    <h3 class="text-lg font-semibold text-blue-800 mb-2">Parent Email Controls</h3>
    <div class="flex gap-2">
      <%= button_to "Send Parent Email Now", send_parent_email_now_student_path(@student), 
            method: :post,
            class: "bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm",
            confirm: "Send parent email immediately to #{@student.parent_email}?" %>
    </div>
    <div class="text-xs text-gray-600 mt-2">
      This will cancel any delayed email and send immediately.
    </div>
  </div>
<% end %>


+ Authentication Email Magic Links
  - https://railsdesigner.com/saas/magic-links-for-rails-authentication/
  - Limit to shepherds' domain
  - long lasting 90 day expire token
  - sign out button

Remove bypass email check boxes
--------------------------------
 - rename dev to user
 - test magic emails still work
 - test magic links 
 - cleanup controller LoginsController
 + test error messaging
   - non-shepherds email
   - email not on user table
